import{r as o,A as b,a1 as g,ae as v,j as e,a as c,h as y}from"./index-3ed1fa78.js";import{u as E,F as N}from"./FormError-a3fab181.js";import{B as k}from"./Box-2f3a3966.js";import{C as p}from"./CustomInput-6ca7ad9c.js";import{I as P,v as j}from"./form-3a2308eb.js";const A=()=>{const[d,n]=o.useState(!1),[s,f]=o.useState(),[i,l]=o.useState(null);o.useContext(b);const{values:a,handleInputChange:m,reset:u}=E({passwordConfirm:"",password:""}),h=g(),x=v();return e("div",{className:"flex h-screen w-screen dark:bg-gray-900 items-center justify-center",children:e(k,{className:" w-full max-w-[420px] mx-3 sm:mx-0 sm:w-96 ",children:c("form",{onSubmit:async r=>{r.preventDefault();const{error:w,ok:C}=j({...a});if(f(w),!C||a.password!==a.passwordConfirm)return!1;n(!0);try{const t=await y.patch(`/auth/reset-password/${h.token}`,a);t.data.ok?(u(),n(!1),x("/sign-in")):l(t.data.message)}catch(t){t.response&&(l(t.response.data.message),setTimeout(()=>{l(null)},8e3))}finally{n(!1)}},className:"flex items-center justify-between flex-col ",children:[e("h3",{className:"title-form self-start mb-4 !text-xl sm:!text-3xl",children:" Cambiar contraseña "}),i&&e(N,{className:"border border-dashed border-red-400 p-1.5 text-center text-sm mt-3",text:i}),e(p,{type:"password",placeholder:".lk8Tx9W/",onChange:r=>m(r,"password"),required:!0,label:"Contraseña",hasError:s==null?void 0:s.password,errorText:"Contraseña obligatoria ."}),e(p,{type:"password",placeholder:".lk8Tx9W/",onChange:r=>m(r,"passwordConfirm"),hasError:(s==null?void 0:s.passwordConfirm)||a.passwordConfirm!==a.password,required:!0,label:"Confirmar contraseña",errorText:"Las contraseñas no coinciden."}),e("fieldset",{children:e("button",{disabled:d,className:"btn gradient",type:"submit",children:d?c("div",{className:"flex items-center gap-4",children:[e("span",{children:"Espere"}),e(P,{})]}):e("span",{children:"Enviar"})})})]})})})};export{A as default};
