import{h as y,r as i,a4 as T,f as b,j as r,L as ie,a as s,F as Ca,a5 as ka,a6 as va,a7 as Aa}from"./index-3ed1fa78.js";import{u as Da,H as Pa,D as Sa,C as F,a as Ia}from"./HeaderData-f8341142.js";import{B as P}from"./Box-2f3a3966.js";import{C as _e,F as Ma}from"./FormActionBtns-c23092d4.js";import{C as ce}from"./CustomInput-6ca7ad9c.js";import{u as Ea,F as Qe}from"./FormError-a3fab181.js";import{R as Oa,D as R}from"./RequestError-ce21148f.js";import{F as S}from"./FieldsetGroup-13ce1fee.js";import{u as Ta}from"./usePaymentTypes-eca79a45.js";import{C as me,T as Fa}from"./index.esm-a0238907.js";import{C as Ke}from"./CloseOnClick-54123682.js";import{f as I,d as Je,p as $a,g as ja}from"./date-8ced1934.js";import{u as Ba}from"./useOwners-dbc72c45.js";import{u as La}from"./useQuery-6083f14c.js";import{h as Ra}from"./html2pdf-c13131c9.js";import{v as qa}from"./form-3a2308eb.js";import{E as Va}from"./EmptyData-5a33961e.js";import{C as Ua}from"./CustomTextArea-ed7f84a9.js";import{r as c}from"./numbers-1d12c913.js";import{u as Ha}from"./useContracts-759ab8e3.js";const za=async()=>{const{data:q}=await y.get("/payment-owners?sort=id:desc");return q},Ga=()=>La({queryKey:["payment-owners"],queryFn:za}),wr=()=>{var Pe,Se,Ie,Me,Ee,Oe,Te,Fe,$e;const[q,pe]=i.useState(!1),[ue,ee]=i.useState(!1),{OwnerId:V,PaymentTypeId:We,month:x,year:M,updateAll:Xe,total:Ya,values:$,handleInputChange:he,obs:Ze,reset:ae}=Ea({OwnerId:null,PaymentTypeId:null,month:T[new Date().getMonth()],year:new Date().getFullYear(),total:0,obs:""}),[f,fe]=i.useState(),[_a,ea]=i.useState(!1),[U,re]=i.useState([]),[H,te]=i.useState([]),[z,se]=i.useState([]),{showAndHideModal:N}=Da(),[be,G]=i.useState(!1),w=i.useRef(0),C=i.useRef(0),k=i.useRef(0),d=i.useRef(),[Qa,ge]=i.useState([]),[Ka,ye]=i.useState([]),[Ja,xe]=i.useState([]),[le,Ne]=i.useState(!1),[aa,we]=i.useState(!1),[Ce,ke]=i.useState(!1),[v,ve]=i.useState([]),[Ae,ne]=i.useState([]),[ra,ta]=i.useState({global:{value:null,matchMode:b.CONTAINS},month:{value:null,matchMode:b.CONTAINS},year:{value:null,matchMode:b.CONTAINS},"Owner.fullName":{value:null,matchMode:b.CONTAINS},createdAt:{value:null,matchMode:b.EQUALS},"PaymentType.name":{value:null,matchMode:b.EQUALS}}),h=Ga(),{data:E,isError:Wa,isLoading:Xa,error:Za,isFetching:er}=Ba(),[sa,De]=i.useState(!1),oe=Ha("?state=Finalizado:ne"),Y=Ta(),la=e=>{ee(!ue),d.current=e},na=()=>{ta({global:{value:null,matchMode:b.CONTAINS},month:{value:null,matchMode:b.CONTAINS},year:{value:null,matchMode:b.CONTAINS},"Owner.fullName":{value:null,matchMode:b.CONTAINS},createdAt:{value:null,matchMode:b.EQUALS},"PaymentType.name":{value:null,matchMode:b.EQUALS}})},oa=e=>r(P,{className:"!m-0 !p-0",children:r(R,{value:e.value,onChange:l=>e.filterApplyCallback(l.value),options:T,showClear:!0,placeholder:"elije mes",className:"h-[42px]   items-center w-full !border-gray-200 shadow "})}),da=e=>r(P,{className:"!m-0 !p-0",children:r(ce,{initialValue:e.value??"",onChange:l=>e.filterApplyCallback(l),type:"date",placeholder:"elije fecha",fieldsetClassName:"!mt-0"})}),ia=e=>{var l;return r(P,{className:"!m-0 !p-0",children:r(R,{value:e.value??"",onChange:a=>e.filterApplyCallback(a.value),options:(l=Y==null?void 0:Y.data)==null?void 0:l.data,optionLabel:"name",showClear:!0,optionValue:"name",placeholder:"elije format de pago",className:"h-[42px]   items-center w-full !border-gray-200 shadow "})})},ca=e=>r(P,{className:"!m-0 !p-0",children:r(R,{value:e.value??"",onChange:l=>e.filterApplyCallback(l.value),options:E==null?void 0:E.data,optionLabel:"fullName",showClear:!0,filterBy:"fullName",optionValue:"fullName",placeholder:"elije propietario",filter:!0,filterPlaceholder:"Busca propietario",className:"h-[42px]   items-center w-64 !border-gray-200 shadow "})}),ma=async e=>{var l,a,n;try{G(!0);const o=await y.delete("/payment-owners/"+e);o.data.ok?((l=h.data)!=null&&l.data&&(h.data.data=(a=h.data)==null?void 0:a.data.filter(t=>t.id!==e)),ee(!1),N("Borrado",o.data.message)):N("Error",o.data.message||"Algo malo ocurrío.","red")}catch(o){o.response&&N("Error",((n=o.response.data)==null?void 0:n.message)||"Algo malo ocurrío.","red")}finally{G(!1)}},pa=async e=>{var n;e.preventDefault(),$.total=c(w.current+C.current+k.current);const{error:l,ok:a}=qa({...$},["obs"]);if(fe(l),!a)return!1;try{G(!0);const o=await y.post("/payment-owners",{...$,OwnerId:$.OwnerId.id,expenseDetails:[...H,...z],eventualityDetails:U,totalContract:Ae.length});o.data.ok?(h.refetch(),ae(),_(),N("Guardado",o.data.message)):N("Error",o.data.message||"Algo malo ocurrío.","red")}catch(o){o.response&&N("Error",((n=o.response.data)==null?void 0:n.message)||"Algo malo ocurrío.","red")}finally{G(!1)}},_=()=>{ae(),re([]),te([]),se([]),ye([]),ge([]),xe([]),ne([]),w.current=0,C.current=0,k.current=0,pe(!1),fe({})},ua=e=>s("div",{className:"flex gap-x-3 items-center justify-center",children:[r(Aa,{title:"Imprimir comprobante",size:22,onClick:()=>ya(e)}),r(Fa,{title:"Revertir cobro",size:23,onClick:()=>la(e)})]}),ha=e=>{let l=[...H];e.checked?l.push(e.value):l=l.filter(a=>a.id!==e.value.id),C.current=c(l.reduce((a,n)=>a+n.amount,0)),te(l)},fa=e=>{let l=[...U];e.checked?l.push(e.value):l=l.filter(a=>a.id!==e.value.id),w.current=c(l.reduce((a,n)=>a+n.ownerAmount,0)),re(l)},ba=e=>{let l=[...z];e.checked?l.push(e.value):l=l.filter(a=>a.id!==e.value.id),k.current=c(l.reduce((a,n)=>a+n.amount,0)),se(l)},ga=async e=>{ke(!1),De(!0),ae(),re([]),te([]),se([]),ve([]),ye([]),ge([]),xe([]),ne([]),w.current=0,C.current=0,k.current=0,Xe({...$,OwnerId:e.value});try{const l=await y.get(`/payment-owners?OwnerId=${e.value.id}&month=${x}&year=${M}&include=true`);l.data.results>0&&(l.data.data.map(a=>ve(n=>[...n,...a.expenseDetails.concat(a.eventualityDetails)])),ke(!0))}catch{N("Error","Error al intentar validar si el contrato ya tiene cobro para el mes y ano actual","red")}try{(await y.get(`contracts/owner/${e.value.id}/all`)).data.data.map(async a=>{var B,L,D,Z,je,Be,Le,Re,qe,Ve,Ue,He;const n=y.get(`/owner-expenses?amount=0:gt&ContractId=${a.id}&include=true`),o=y.get(`/eventualities?ownerPaid=0&PropertyId=${a.PropertyId}&ownerAmount=0:ne&include=true`),t=y.get(`/debt-owners?paid=0&ContractId=${a.id}`),m=y.get(`/payment-clients?ContractId=${a.id}&month=${x}&year=${M}&paidCurrentMonth=${1}&include=true`),p=y.get(`/debt-clients?ContractId=${a.id}&paid=${0}&include=true`),[K,J,W,A,de]=await Promise.all([n,o,t,m,p]),j=Je(new Date().toISOString().slice(0,10),a.endDate)<=0;let X=a.state==="Finalizado"||j?[]:[{amount:c((L=a.PriceHistorials.sort((u,g)=>u.id-g.id)[((B=a.PriceHistorials)==null?void 0:B.length)-1])==null?void 0:L.amount),description:"ALQUILER "+((D=a==null?void 0:a.Property)==null?void 0:D.street)+" "+((Z=a==null?void 0:a.Property)==null?void 0:Z.number)+" "+((je=a==null?void 0:a.Property)==null?void 0:je.floor)+" "+((Be=a==null?void 0:a.Property)==null?void 0:Be.dept)+" "+x+"/"+M,id:Number(Math.floor(Math.random()*1e5).toFixed(0)+a.id.toFixed(0)+new Date().getTime().toFixed(0)),ContractId:a.id,paidCurrentMonth:!0,rent:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{amount:-c(((Re=a.PriceHistorials.sort((u,g)=>u.id-g.id)[((Le=a.PriceHistorials)==null?void 0:Le.length)-1])==null?void 0:Re.amount)*e.value.commision/100),description:"HONORARIOS "+((qe=a==null?void 0:a.Property)==null?void 0:qe.street)+" "+((Ve=a==null?void 0:a.Property)==null?void 0:Ve.number)+" "+((Ue=a==null?void 0:a.Property)==null?void 0:Ue.floor)+" "+((He=a==null?void 0:a.Property)==null?void 0:He.dept)+" "+x+"/"+M,id:Number(Math.floor(Math.random()*1e4).toFixed(0)+a.id.toFixed(0)+new Date().getTime().toFixed(0)),ContractId:a.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},...K.data.data.filter(u=>{if(u.description!=="AGUAS"&&u.description!=="API")return{...u};if(u.description==="AGUAS"&&(new Date().getMonth()+1)%2===0)return{...u};if(u.description==="API"&&(new Date().getMonth()+1)%2!==0)return{...u}}).map(u=>({...u,description:u.description+" "+x+"/"+M}))];ne(u=>[...u,{expenseDetails:X,eventualityDetails:J.data.data.map(g=>{var O,ze,Ge,Ye;return{...g,ContractId:a.id,description:g.description+" | "+((O=a==null?void 0:a.Property)==null?void 0:O.street)+" "+((ze=a==null?void 0:a.Property)==null?void 0:ze.number)+" "+((Ge=a==null?void 0:a.Property)==null?void 0:Ge.floor)+"-"+((Ye=a==null?void 0:a.Property)==null?void 0:Ye.dept)}}),debts:W.data.data.sort((g,O)=>g.year-O.year).sort((g,O)=>g.month-O.month),contract:a,paidCurrentMonth:A.data.results>0,hasDebts:de.data.results>0,isExpired:j}])})}catch{}finally{De(!1)}},ya=async e=>{d.current=e;let l={};e.eventualityDetails.map(a=>{l.hasOwnProperty(a.ContractId)?l[a.ContractId]=[...l[a.ContractId],a]:l[a.ContractId]=[a]}),e.expenseDetails.map(a=>{l.hasOwnProperty(a.ContractId)?l[a.ContractId]=[...l[a.ContractId],a]:l[a.ContractId]=[a]}),d.current.printData=Object.values(l),d.current.printData.map(a=>{var n;return a[0].contract=(n=oe==null?void 0:oe.data)==null?void 0:n.data.find(o=>o.id===a[0].ContractId),a}),we(!0)},Q=()=>{we(!1),d.current=null},xa=async()=>{var a,n,o;Ne(!0);var e=document.getElementById("pdf-download"),l={margin:[.1,.1],filename:`${(a=d.current)==null?void 0:a.Owner.fullName}_${(n=d.current)==null?void 0:n.month}_${(o=d.current)==null?void 0:o.year}_${I(new Date().toISOString())}.pdf`,image:{type:"png",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"landscape"}};try{await Ra().from(e).set(l).save(),Q()}catch(t){console.log(t)}finally{Ne(!1)}},Na=()=>{ea(!1),d.current=null,pe(!0)},wa=e=>{const l=new Set,a=new Set,n=e.expenseDetails.filter(t=>t.hasOwnProperty("debt")).map(t=>({month:t.month,year:t.year})),o=e.expenseDetails.filter(t=>t.hasOwnProperty("paidCurrentMonth"));return n.length>0&&n.forEach(t=>{l.add(t.month),a.add(t.year)}),(o.length>0||n.length===0&&o.length===0)&&(l.add(T.findIndex(t=>t===e.month)+1),a.add(e.year)),s("span",{children:[Array.from(l).map(t=>T[t-1]).join("-"),"/",Array.from(a).join("-")]})};return h.isLoading?r(ie,{}):h.isError?r(Oa,{error:h.error}):s("div",{className:"container m-auto  flexsm:mx-0  flex-col justify-center sm:justify-center",children:[r(Pa,{action:Na,text:"Pago a propietario"}),((Pe=h==null?void 0:h.data)==null?void 0:Pe.data.length)>0?s(Ca,{children:[r("button",{className:"btn dark:bg-transparent dark:text-slate-400 dark:border hover:!text-slate-500 active:text-slate-500 border-slate-700 ",onClick:na,children:"Borrar filtros"}),r(P,{className:"!p-0 !overflow-hidden !border-none sm:mx-0   mb-4 ",children:s(Sa,{size:"small",emptyMessage:"No hay cobro para eso filtro",className:"!overflow-hidden   !border-none",value:(Se=h==null?void 0:h.data)==null?void 0:Se.data,dataKey:"id",responsiveLayout:"scroll",filterDisplay:"menu",filters:ra,globalFilterFields:["month","year","Owner.fullName","createdAt","PaymentType.name"],children:[r(F,{field:"Owner.fullName",body:e=>{var l,a;return s("span",{children:[(l=e.Owner)==null?void 0:l.fullName," ",(a=e.Owner)==null?void 0:a.cuit]})},header:"Propietario",headerClassName:"!border-none dark:!bg-gray-800 dark:!text-slate-400",className:"dark:bg-slate-700 dark:text-slate-400 dark:!border-slate-600 ",sortable:!0,filter:!0,filterMenuClassName:"!bg-gray-100 dark:!bg-slate-700 dark:!text-slate-400 dark:!border-slate-600",showClearButton:!1,showFilterMatchModes:!1,showApplyButton:!1,filterElement:ca}),r(F,{field:"month",body:wa,header:"Periodo",headerClassName:"!border-none dark:!bg-gray-800 dark:!text-slate-400",className:"dark:bg-slate-700 dark:text-slate-400 dark:!border-slate-600 ",sortable:!0,filter:!0,filterMenuClassName:"!bg-gray-100 dark:!bg-slate-700 dark:!text-slate-400 dark:!border-slate-600",showClearButton:!1,showFilterMatchModes:!1,showApplyButton:!1,filterElement:oa}),r(F,{field:"createdAt",body:e=>r("span",{children:I(e.createdAt)}),header:"Fecha de Cobro",headerClassName:"!border-none dark:!bg-gray-800 dark:!text-slate-400",className:"dark:bg-slate-700 dark:text-slate-400 dark:!border-slate-600 ",sortable:!0,filter:!0,filterMenuClassName:"!bg-gray-100 dark:!bg-slate-700 dark:!text-slate-400 dark:!border-slate-600",showClearButton:!1,showFilterMatchModes:!1,showApplyButton:!1,filterElement:da}),r(F,{field:"total",body:e=>s("span",{children:["$",c(e.total)]}),header:"Total Cobrado",headerClassName:"!border-none dark:!bg-gray-800 dark:!text-slate-400",className:"dark:bg-slate-700 dark:text-slate-400 dark:!border-slate-600 ",sortable:!0}),r(F,{field:"PaymentType.name",header:"Formato de pago",headerClassName:"!border-none dark:!bg-gray-800 dark:!text-slate-400",className:"dark:bg-slate-700 dark:text-slate-400 dark:!border-slate-600 ",sortable:!0,filter:!0,filterMenuClassName:"!bg-gray-100 dark:!bg-slate-700 dark:!text-slate-400 dark:!border-slate-600",showClearButton:!1,showFilterMatchModes:!1,showApplyButton:!1,filterElement:ia}),r(F,{body:ua,headerClassName:"!border-none dark:!bg-gray-800",className:"dark:bg-slate-700 dark:text-slate-400 dark:!border-slate-600 ",exportable:!1,style:{width:90}})]})})]}):r(Va,{text:"Aún no hay pago"}),h.isFetching&&r(ie,{h:40,w:40}),r(Ia,{savingOrUpdating:be,show:ue,setShow:ee,customTitle:"Revertir Cobro",customMessage:`¿Estás seguro que querés revertir el cobro de ${(Me=(Ie=d.current)==null?void 0:Ie.Owner)==null?void 0:Me.fullName} ${(Ee=d.current)==null?void 0:Ee.month}/${(Oe=d.current)==null?void 0:Oe.year}?`,destroy:()=>{var e;return ma((e=d.current)==null?void 0:e.id)}}),s(_e,{show:q,closeModal:_,overlayClick:!1,className:"shadow-none border-0  overflow-hidden",titleText:"Pagos",custom:!0,children:[r(Ke,{action:_}),s("div",{className:"flex w-full flex-col md:flex-row gap-x-4 mt-3 ",children:[s("form",{onSubmit:pa,className:"w-full  sm:flex-grow-[50%] sm:min-w-[600px] border border-gray-100 dark:border-slate-600 p-2",children:[r(S,{children:s("fieldset",{children:[r("label",{htmlFor:"OwnerId",children:"Propietario"}),r(R,{value:V,onChange:ga,options:E==null?void 0:E.data,optionLabel:"fullName",filterBy:"fullName,cuit",filterPlaceholder:"Busca propietario por nombre o cuit",optionValue:"",placeholder:"elije un propietario",filter:!0,valueTemplate:(e,l)=>e?s("span",{children:[e.fullName," | ",e.cuit]}):l.placeholder,itemTemplate:e=>s("span",{children:[e.fullName," | ",e.cuit]}),className:"h-[42px] items-center !border-gray-200 shadow "}),(f==null?void 0:f.OwnerId)&&r(Qe,{text:"El propietario es obligatoria."})]})}),Ce&&V&&s("div",{className:"text-green-500 dark:text-green-400 text-center my-2",children:["Ya cobraste ",v.length," concepto(s)   para el/los mes(es)  de  ",Array.from(new Set(v.map(e=>typeof e.month=="number"?T[e.month-1]:e.month?e.month:x))).join(",")]}),sa?r(ie,{}):r("div",{className:"flex flex-col gap-y-4 mt-4",children:Ae.map((e,l)=>{var a,n,o;return s("div",{className:"bg-gray-50 shadow-sm border border-gray-300 dark:border-slate-700 dark:bg-slate-900 p-2",children:[s("h2",{className:`font-semibold text-lg mb-3 ${e.isExpired?"text-red-400":e.contract.state=="Finalizado"?"text-yellow-500":"text-green-400"} `,children:[e.contract.Property.street," ",e.contract.Property.number," ",e.contract.Property.floor,"-",e.contract.Property.dept," | ",e.contract.Client.fullName,` | ${e.contract.state} | ${e.isExpired?"Vencido":"Vigente"} | ${I(e.contract.startDate)} - ${I(e.contract.endDate)}`]}),Ce&&V&&v.filter(t=>t.ContractId===e.contract.id).length>0&&s("div",{className:"text-green-500 dark:text-green-400 text-center my-2",children:["Ya cobraste ",v.filter(t=>t.ContractId===e.contract.id).length," concepto(s)   para el/los mes(es)  de "," ",Array.from(new Set(v.filter(t=>t.ContractId===e.contract.id).map(t=>typeof t.month=="number"?T[t.month-1]:t.month?t.month:x))).join(",")]}),!e.isExpired&&e.contract.state!=="Finalizado"&&r("div",{className:`paid-current-month border border-dashed p-2  ${e.paidCurrentMonth?"text-green-500 border-green-400 dark:text-green-400":"text-red-500 border-red-400 dark:text-red-400"} text-center my-2`,children:e.paidCurrentMonth?"El inquilino ya pagó el mes actual.":"El inquilino  no pagó el mes actual todavía."}),e.hasDebts&&s("div",{className:"has-debts border border-dashed p-2  border-red-400 dark:text-red-400 text-center my-2",children:[r("span",{className:"text-red-500",children:"El inquilino   tiene deudas impagas."}),r(ka,{target:"_blank",to:"/contract-debts-clients",className:"text-slate-700 ml-2 underline dark:text-slate-400",children:"Ver deudas"})]}),((a=e.expenseDetails)==null?void 0:a.length)>0&&s("div",{className:"",children:[r("h1",{className:"title-form mb-2",children:"Alquiler y Gastos propietarios"}),r("div",{className:"eventualities-section flex flex-col gap-y-2 gap-x-3",children:e.expenseDetails.map((t,m)=>s("div",{className:"align-items-center flex items-center flex-wrap   border border-gray-300 dark:border-slate-700 p-2",children:[r(me,{inputId:t.id.toString()+t.createdAt+m+t.amount+t.description,name:"expenseClients",disabled:v.filter(p=>p.description===t.description&&p.ContractId===t.ContractId).length>0,value:t,onChange:ha,checked:H.some(p=>p.id===t.id)}),s("label",{htmlFor:t.id.toString()+t.createdAt+m+t.amount+t.description,className:` ml-2  ${v.filter(p=>p.description===t.description&&p.ContractId===t.ContractId).length>0?" cursor-not-allowed opacity-60 line-through":"cursor-pointer"} `,children:["$",c(t.amount)," - ",t.description]})]},t.id.toString()+t.createdAt+m+t.amount+t.description))})]}),((n=e.eventualityDetails)==null?void 0:n.length)>0&&s("div",{className:"my-4",children:[r("h1",{className:"title-form mb-2",children:"Eventualidades"}),r("div",{className:"eventualities-section  flex flex-col gap-y-2  gap-x-3",children:e.eventualityDetails.map((t,m)=>s("div",{className:"align-items-center flex cursor-pointe items-center flex-wrap   border border-gray-300 dark:border-slate-700 p-2",children:[r(me,{inputId:t.updatedAt+t.description+m+t.ownerAmount+t.description,value:t,name:"eventuality",onChange:fa,checked:U.some(p=>p.id===t.id)}),s("label",{htmlFor:t.updatedAt+t.description+m+t.ownerAmount+t.description,className:"ml-2 cursor-pointer",children:["$",c(t.ownerAmount)," - ",t.description]})]},t.updatedAt+t.description+m+t.ownerAmount+t.description))})]}),((o=e.debts)==null?void 0:o.length)>0&&s("div",{className:"my-4",children:[r("h1",{className:"title-form mb-2",children:"Deudas anteriores"}),r("div",{className:"eventualities-section flex flex-col gap-y-2 gap-x-3",children:e.debts.map((t,m)=>s("div",{className:`align-items-center cursor-pointe flex items-center  flex-wrap border border-gray-300 dark:border-slate-700 p-1 ${Je(t.year+"-"+$a(t.month)+"-10",new Date().toString())>70?" !border-red-500 dark:!border-red-400":""}`,children:[r(me,{inputId:t.updatedAt+t.id+m+t.amount+t.description,value:t,name:"debtsProperties",onChange:ba,checked:z.some(p=>p.id===t.id)}),r("label",{htmlFor:t.updatedAt+t.id+m+t.amount+t.description,className:"ml-2 cursor-pointer",children:s("span",{className:"",children:["$",c(t.amount)," ",t.description]})})]},t.updatedAt+t.id+m+t.amount+t.description))})]})]},l)})}),s(S,{children:[s(S,{className:"w-full sm:w-[50%]",children:[r(ce,{initialValue:x||"",placeholder:"",label:"Mes",onChange:()=>{},required:!0,disabled:!0,hasError:f==null?void 0:f.month,errorText:"El mes de pago es obligatorio."}),r(ce,{initialValue:M||"",placeholder:"",label:"Año",onChange:()=>{},required:!0,disabled:!0,hasError:f==null?void 0:f.year,errorText:"El año de pago es obligatorio."})]}),r(S,{className:"w-full sm:w-[50%]",children:s("fieldset",{className:"",children:[r("label",{htmlFor:"PaymentTypeId",children:"Forma de pago "}),r(R,{value:We,onChange:e=>he(e.value,"PaymentTypeId"),options:(Te=Y.data)==null?void 0:Te.data,optionLabel:"name",filterPlaceholder:"Busca forma de pago",optionValue:"id",placeholder:"elije  forma de pago",filter:!0,className:"h-[42px] items-center !border-gray-200 shadow"}),(f==null?void 0:f.PaymentTypeId)&&r(Qe,{text:"El formato de pago es obligatorio."})]})})]}),s(S,{children:[s(S,{className:"w-full sm:w-[50%]",children:[s("fieldset",{className:"",children:[r("label",{htmlFor:"",children:"Total event."}),r("input",{placeholder:"1234",type:"number",disabled:!0,value:w.current,onChange:()=>{}})]}),s("fieldset",{className:"",children:[r("label",{htmlFor:"",children:"Total impuestos"}),r("input",{placeholder:"1234",type:"number",disabled:!0,value:C.current+k.current,onChange:()=>{}})]})]}),r(S,{className:"w-full sm:w-[50%]",children:s("fieldset",{className:"",children:[r("label",{htmlFor:"total",children:"Total a cobrar"}),r("input",{placeholder:"1234",disabled:!0,min:1,name:"total",type:"number",required:!0,value:w.current+C.current+k.current,onChange:()=>{}})]})})]}),r(Ua,{initialValue:Ze||"",placeholder:"Pago  transferencia bancaria",onChange:e=>{he(e,"obs")},label:"Observaciones",optional:!0}),r(Ma,{savingOrUpdating:be,onClose:_})]}),V&&s(P,{className:"shadow-none rounded-none  mx-0  border-none  p-2",children:[r("h3",{className:"font-bold mb-2 text-lg ",children:"Lista de conceptos a pagar"}),s("div",{className:"flex justify-between flex-col min-h-[300px] h-[95%]",children:[s("div",{className:"payment-pdf  pt-4 flex-1 gap-y-1 flex flex-col px-1",children:[H.map((e,l)=>s("div",{className:"align-items-center uppercase text-sm border-b dark:border-slate-700 flex gap-x-3 items-center  justify-between    border-gray-300",children:[r("span",{className:"",children:e.description}),s("span",{children:["$",c(e.amount)]})]},l)),U.map((e,l)=>s("div",{className:"align-items-center uppercase text-sm border-b dark:border-slate-700   flex gap-x-3 items-center  justify-between    border-gray-300",children:[r("span",{className:"",children:e.description}),s("span",{children:["$",c(e.ownerAmount)]})]},l)),z.map((e,l)=>s("div",{className:"align-items-center uppercase text-sm border-b  dark:border-slate-700  flex gap-x-3 items-center  justify-between    border-gray-300",children:[r("span",{className:"",children:e.description}),s("span",{children:["$",c(e.amount)]})]},l))]}),r("div",{className:"mt-auto",children:s("div",{className:"align-items-center font-bold uppercase text-sm mt-3 flex gap-x-3 items-center  justify-between    border-gray-300",children:[r("span",{className:"",children:"Total a pagar "}),s("span",{children:["$",c(w.current+C.current+k.current)]})]})})]})]})]})]}),s(_e,{show:aa,closeModal:Q,overlayClick:!1,titleText:`Recibo de ${(Fe=d.current)==null?void 0:Fe.month} - ${($e=d.current)==null?void 0:$e.year}`,children:[r(Ke,{action:Q}),s(P,{className:"!shadow-none rounded-lg !p-2 !border-none  border-gray-200 dark:!from-gray-700 dark:!to-gray-800 dark:!bg-gradient-to-tr mt-3",children:[r("div",{id:"pdf-download",className:"flex gap-x-2 ",children:[1,2].map((e,l)=>{var a,n,o,t,m,p,K,J,W;return s("div",{className:"flex  justify-between flex-col border border-gray-200 dark:border-slate-600 p-1  min-h-[750px] w-[500px]",children:[s("div",{className:"header-pdf flex items-center justify-between border border-gray-200 dark:border-slate-600  p-2",children:[s("div",{className:"left w-[50%] flex items-center flex-col gap-y-2",children:[r("div",{className:"logo-app flex items-center",children:r("img",{width:60,className:"min-w-[60px] object-cover",src:va,alt:"LOGO CENTRO"})}),s("div",{className:"flex flex-col items-center",children:[r("span",{className:"text-lg font-semibold uppercase",children:"Centro"}),r("span",{className:"text-xs font-semibold ",children:"Administracion de  "}),r("span",{className:"text-xs font-semibold ",children:"Consorcios y Propiedades"})]})]}),r("div",{className:"right w-[50%] ",children:s("div",{className:"flex flex-col items-center text-xs",children:[r("span",{children:"Alquileres - Ventas - Tasaciones"}),r("span",{children:"San Martin 1514  Tel: 4483280"}),r("span",{children:"2000 - Rosario - Santa Fe "}),r("span",{children:"inmobiliaria.centro.1980@gmail.com"}),r("span",{children:"www.centro.com.ar"}),r("div",{className:"",children:s("span",{className:"flex gap-x-2",children:[r("span",{children:"Rosario"}),r("span",{children:I(new Date().toISOString())})]})})]})})]}),s("div",{className:"client-data border text-xs border-gray-200 dark:border-slate-600  my-2 p-2 flex ",children:[s("div",{className:"flex flex-col gap-y-2 flex-1",children:[s("span",{children:[r("span",{className:"font-semibold",children:"Propietario: "}),r("span",{children:(a=d.current)==null?void 0:a.Owner.fullName})]}),s("span",{children:[r("span",{className:"font-semibold",children:"Domicilio: "}),r("span",{children:(n=d.current)==null?void 0:n.Owner.address})]})]}),r("div",{className:"w-30  flex gap-x-4",children:r("div",{className:"",children:r("div",{className:"",children:s("span",{className:"flex gap-x-2",children:[r("span",{children:"Recibo"}),s("span",{className:"",children:["#",ja(((o=d.current)==null?void 0:o.id)||0,4)]})]})})})})]}),s("div",{className:"payment-pdf mb-2   flex-1 gap-y-2 flex flex-col ",children:[(m=(t=d.current)==null?void 0:t.printData)==null?void 0:m.map((A,de)=>{var j,X,B,L;return s("div",{className:" border border-gray-200 dark:border-slate-600 p-2",children:[A.map((D,Z)=>s("div",{className:"align-items-center uppercase text-xs  flex gap-x-3 items-center  justify-between dark:border-slate-600     border-gray-300",children:[r("span",{className:"",children:D.description}),s("span",{children:["$",D.amount?c(D.amount):c(D.ownerAmount)]})]},Z)),A[0].contract&&s("span",{className:"vencimiento-contrato text-xs text-yellow-500",children:["Vigencia  contrato :  ",I((j=A[0].contract)==null?void 0:j.startDate)," | ",I((X=A[0].contract)==null?void 0:X.endDate)," "," - ","Nro carpeta  :  ",(L=(B=A[0].contract)==null?void 0:B.Property)==null?void 0:L.folderNumber]})]},de)}),((p=d.current)==null?void 0:p.obs)&&s("div",{className:"text-xs border p-1 pb-2 mt-1 dark:border-slate-600     border-gray-300",children:[r("span",{className:"font-medium",children:"Observaciones : "}),r("span",{children:(K=d.current)==null?void 0:K.obs})]})]}),s("div",{className:"mt-auto p-2 font-normal border border-gray-200 dark:border-slate-600 ",children:[s("div",{className:"align-items-center  text-xs  flex gap-x-3 items-center  justify-between dark:border-slate-600     border-gray-300",children:[r("span",{className:"",children:"Total a pagar "}),s("span",{className:"",children:["$ ",c((J=d.current)==null?void 0:J.total)]})]}),s("div",{className:"align-items-center   text-xs  flex gap-x-3 items-center  justify-between dark:border-slate-600     border-gray-300",children:[r("span",{className:"",children:"Format de pago  "}),r("span",{className:"",children:(W=d.current)==null?void 0:W.PaymentType.name})]}),s("div",{className:"sign-aclaration my-1 text-xs font-normal",children:[r("div",{className:"sign my-2",children:r("span",{children:"Firma : "})}),r("div",{className:"",children:r("span",{children:"Aclaración : "})})]})]})]},l)})}),s("div",{className:"flex gap-x-2",children:[r("button",{className:"btn sec  !my-4",disabled:le,onClick:Q,children:" Cancelar "}),s("button",{className:"btn gradient  !my-4",disabled:le,onClick:xa,children:[" ",le?"Descargando ... ":"Descargar"," "]})]})]})]})]})};export{wr as default};
